---
title: "Fehlermeldungen"
format: html
editor: 
  markdown: 
    wrap: 72
---

# Rendering in Quarto zu einer PDF funktioniert nicht

In der Vergangenheit gab es öfter Probleme mit der Installation von
`tinytex`. Eine beispielhafte Fehlermeldung hierfür sah folgendermassen
aus:

processing file: skript.qmd

\|........................................ \| x% \[unnamed-chunk-x\]

Error in `contrib.url()`:

! trying to use CRAN without setting a mirror

Backtrace:

```         
x
```

-utils::install.packages("tinytex") -utils::contrib.url(repos, "source")

Quitting from skript.qmd:Zeile-Zeile \[unnamed-chunk-x\]

Execution halted

Der Kern der Fehlermeldung lautet: "! trying ot use CRAN without setting
a mirror". CRAN ist die Plattform, von welcher standardmässig Pakete
heruntergeladen werden. Die URL, also die Internetadressse von CRAN, ist
dafür im Hintergrund in R eingestellt. Hier scheint es nun aber so, dass
es unter der gesetzten URL kein Paket `tinytex` gibt. Dieses Problem
lässt sich temporär (also einmalig für eure laufende Sitzung in RStudio)
oder dauerhaft (also auch, wenn ihr RStudio schliesst und wieder neu
startet) beheben. Um das Problem temporär zu lösen kann man einfach die
URL zu CRAN explizit in der Console angeben:

```{r}
 #| eval: false
 #| echo: true

options(repos = c(CRAN = "https://cloud.r-project.org"))
```

Möchte man die Einstellung dauerhaft behalten braucht es einen weiteren
Schritt. Erst wird über die Console eine globale Einstellungsdatei von
RStudio geöffnet:

```{r}
#| eval: false
#| echo: true
#| include: false
file.edit("~/.Rprofile")
```


In diese Datei kann dann der Befehl zur expliziten Setzung der URL
platziert werden. Diese Datei abspeichern und RStudio neu starten. Jetzt
sollte `tinytex` von der korrekten URL abgerufen, gefunden und
schlussendlich auch erfolgreich installiert werden können.

# Das Objekt mit dem ich etwas machen möchte kann nicht gefunden werden

"==\> quarto preview Hands on - Block 3.qmd --to html --no-watch-inputs
--no-browse

processing file: Hands-on---Block-3.rmarkdown
\|................................................. \| 96%
\[unnamed-chunk-10\] Error:! object 'dat_full' not foundBacktrace: ▆ 1.
└─dplyr::rename(dat_full, cvstm_sum = "csvtm_sum") Quitting from
Hands-on---Block-3.rmarkdown:331-343 \[unnamed-chunk-10\] Execution
halted"

Netterweise gibt uns die Fehlermeldung die Stelle im Code aus, an
welcher das Problem aufrat:

```{r, eval = FALSE, echo=TRUE}


dplyr::rename(dat_full, cvstm_sum = "csvtm_sum")
```

![](../../images/Fehlermeldungen.png)

Der zentrale Teil der Fehlermeldung ist hierbei "Error:! object
`dat_full` not found". Der Datensatz `dat_full` ist vor der Ausführung
scheinbar noch nicht vorhanden. Stellt also unbedingt sicher, vor der
Ausführung von `dplyr::rename(dat_full, cvstm_sum = "csvtm_sum")`den
Datensatz eingelesen und den dafür vorgesehenen Chunk zum Einlesen
**nicht** auf `eval = FALSE` gesetzt zu haben.

# Beim Rendern einer html werden noch einige weitere Ordner und Dateien erstellt

Um zu grosse html-files oder Ladezeiten eines html-files zu vermeiden,
weicht Quarto ggf. beim Rendern dazu aus nicht einen einzelnen html-file
zu erstellen, sondern einen Ordner mit mehreren Dateien. Der html-file
ruft diese dann beim Laden allesamt auf. Wenn das nicht gewünscht ist,
dann gibt es mindestens zwei Möglichkeiten Quarto zu zwingen einen
einzelnen und unabhängigen html-file zu erstellen. Als erste Variante
kann der YAML-Header (der ganz oben im Quarto-file positioniert ist) um
die Zeile `embed-resources: true` ergänzt werden:

```{r, eval = FALSE}

# vorher
  format:
    html:

# nachher
  format:
    html:
      embed-resources: true
```

Sollte sich auch damit das Problem nicht lösen, dann kann der
Quarto-file auch manuell über das *Terminal* gerendert werden. Das
Terminal beachten wir sonst im Seminar nicht, ist hierfür aber
ausnahmsweise eine elegante Lösung. Das Terminal befindet sich unten
links, wo sich auch die euch bereits vertraute *Console* und beim
Rendern das Fenster *Background Jobs* befinden. Ist das Terminal noch
nicht vorhanden, kann es über Tools --\> Terminal --\> New Terminal
(Alt+ Umschalttaste + R) geöffnet werden. Dort wird dann folgender
Befehl eingegeben:

```{r, eval = FALSE}

quarto render meinDokument.qmd --embed-resources
```

Hierbei muss natürlich noch der Dateiname des .qmd-file entsprechend
angepasst werden. Weitere Informationen gibt es
[hier](https://quarto.org/docs/reference/formats/html.html) (am besten
auf der Seite selbst noch nach dem Begriff embed-resources suchen).
