---
title: "Hands On â€“ Coding Basics (Einheiten 5 und 6)"
editor: visual
---

Bei Bedarf findest du hier nochmals die Slides zu Einheit 5:

::: {=html}
<iframe src="../01_slides/EH_5.html"
        width="100%"
        height="500"
        style="border:0; display:block; margin: 0 0 2rem 0;"></iframe>
:::

Und hier die Slides zu Einheit 6:

::: {=html}
<iframe src="../01_slides/EH_6.html"
        width="100%"
        height="500"
        style="border:0; display:block; margin: 0 0 2rem 0;"></iframe>
:::

# Lernziele des Hands-On-Blocks 3

âœ…Basics Reproduziebarer Code

âœ…Quarto

âœ…Faktoren

âœ…Datentypen: Vektoren, Listen, Matrizen, Dataframes

# Reproduzierbarer Code: Quarto

ğŸ‘‰[R for Datascience, Kapitel 28](https://r4ds.hadley.nz/quarto.html)

Bisher haben wir hauptsÃ¤chlich in Skripten gearbeitet. RStudio bietet jedoch die MÃ¶glichkeit, in einem **reproduzierbareren Format** zu arbeiten â€“ ğŸ‘‰ **Quarto**.

Quarto verbindet normalen Text und Code in einem dynamischen Dokument. Auch diese Website wurde mit Quarto erstellt. Dadurch lÃ¤sst sich die Kommentierung von Code besser integrieren, was die Arbeit insgesamt reproduzierbarer macht. Mit Quarto kÃ¶nnen zudem ganze Dokumente erstellt werden, beispielsweise eine Masterarbeit.

In den folgenden Ãœbungen setzen wir uns mit einigen der **Vorteile von Quarto** auseinander.

## Ãœbungen:

-   Erstelle ein neues Quarto-Skript:

![](../../images/hands_on_3/Quarto.png)

-   Versuche dich zu orientieren: Wie wechselst du zwischen dem **Visual** und **Source Editor**?

-   **Erstelle eine Ãœberschrift:**

    -   Suche zuerst nach der entsprechenden Option im **Visual Editor**.

    -   Schau dir anschlieÃŸend die Ãœberschrift im **Source Editor** an. Wie unterscheiden sich Ãœberschriften von normalem Text?

    -   Schreibe einige Dinge in *kursiv*, **fett**, [unterstrichen]{.underline}, Schaue dir diese im Source Editor an.

    -   Rendere deine Datei indem du den Button "Render" verwendest. Schaue dir das Resultat an.

## Code Chunks

ğŸ“– [R4DS Kapitel 28.5.1](https://r4ds.hadley.nz/quarto.html#code-chunks)

FÃ¼r weitere Informationen, konsultiere das [Quarto Cheatsheat](https://rstudio.github.io/cheatsheets/quarto.pdf) und die [Quarto Website](https://quarto.org/).

-   **Erstelle einen neuen Code-Chunk:**

    -   Versuche es im **Visual Editor**, indem du ein â€/â€œ eingibst und im Drop-down-MenÃ¼ **â€R-Code Chunkâ€œ** auswÃ¤hlst

-   Gib deinem Code-Chunk ein "Label". Verwende dafÃ¼r "#\|" in deinem Chunk um lokale Einstellungen zu setzen. (ğŸ“– [R4DS Kapitel 28.5.1](https://r4ds.hadley.nz/quarto.html#code-chunks)).

-   Manchmal will man nicht alle Teile des Skripts in das gerenderte Dokument Ã¼bernehmen. Erstelle einen neuen Code-Chunk und stelle `eval` und `include` auf TRUE

-   **Kreiere eine neue Variable `datum`** mit dem heutigen Datum. Nutze dafÃ¼r `Sys.Date()`.

## Inline Code

-   **FÃ¼ge folgenden dynamischen Satz in dein Dokument ein:** â€*Dieses Dokument wurde zum letzten Mal am `datum` bearbeitet.*â€œ

-   Benutze dafÃ¼r die Variable `datum` die du bereits kreiert hast. Diese kannst du hinzufÃ¼gen indem du "/" benutzt und "Inline R Code" suchst. Inline Code lÃ¤sst sich auch mit diesem Sonderzeichen \` kreieren wenn du danach ein "r" eingibst.

-   **Rendere dein erstes Dokument:** Stelle ganz oben in deinem Dokument dafÃ¼r das Format auf docx um. Wenn du das Dokument als PDF rendern willst benÃ¶tigst du TinyTeX. Das kannst du mit dem Befehl `install.packages("tinytex")` installieren.

-   Nutze dafÃ¼r den **Render-Button** und schau dir das gerenderte Ergebnis an. Was ist mit deinem dynamischen Satz passiert?

*Das Resultat sollte so aussehen (mit dem aktuellen Datum):*

```{r, echo=FALSE}
datum <- Sys.Date()
```

Dieses Dokument wurde zum letzten Mal am `r datum` bearbeitet.

::: callout-important
Quarto-Dokumente lassen sich nur rendern, wenn das gesamte Skript fehlerfrei durchlÃ¤uft. Tritt beim Rendern ein Fehler auf, ist es sinnvoll, das gesamte Skript auszufÃ¼hren und auf Fehlermeldungen zu achten. Auf diese Weise wird die **Reproduzierbarkeit** sichergestellt.

MÃ¶chte man das Skript trotz eines Fehlers rendern, kann man an den entsprechenden Code-Chunk `#| eval: false` schreiben - dies verhindert, dass der Code fÃ¼r die gerenderte Datei ausgefÃ¼hrt wird
:::

## Quarto Header

In den Code Chunks hast du bereits einige Einstellungen kennengelernt. In den **Quarto-Headern** lassen sich verschiedene Einstellungen vornehmen.\
Beispielsweise kann man den **Output des Dokuments** anpassen (z. B. `format: html` `format: docx` `format: pdf`).

Manchmal mÃ¶chte man auch **globale Einstellungen** vornehmen, die fÃ¼r das gesamte Dokument gelten.\
Zum Beispiel kann es sinnvoll sein, **Warnmeldungen von R** im gerenderten Dokument auszublenden, um die Ãœbersicht zu behalten.\
Dies lÃ¤sst sich mit der Option `warning: false` einstellen.

-   Versuche den Quarto Header so zu verÃ¤ndern das du ein Word oder Pdf renderst.

Viele weitere EinstellungsmÃ¶glichkeiten findest du unter folgendem [Link](https://quarto.org/docs/reference/formats/html.html).

![](../../images/hands_on_3/Quarto_header.png)

### Ãœbungen Quarto Header

Stelle in deinem Quarto Header die folgenden Einstellungen ein indem du die Elemente des YAML-Headers Ã¼berarbeitest. Diesen findest du ganz oben in deinem Dokument. DafÃ¼r kannst du den Code-Block unten kopieren und fÃ¼r deinen Header anpassen.

-   Titel

-   Autor:in

-   Inhaltsverzeichnis (toc) = TRUE

-   Position des Inhaltsverzeichnisses = left

-   Warning = FALSE

-   Message = FALSE

-   <div>

    ```{r, eval=FALSE, echo=TRUE}
    title: 'Gib hier den Namen deines Dokuments ein'
    author: 'Dein Name'
    date: today
    format:
      html:
        theme: flatly
        toc:   # Inhaltsverzeichnis?
        toc-location:  # Links oder Rechts?
    execute:
      warning:  # TRUE or FALSE
      message: # TRUE or FALSE

    ```

    </div>

**Aufgabe:** Rendere das Dokument erneut und Ã¼berprÃ¼fe das gerenderte Ergebnis im Vorschaufenster oder im Ausgabeordner.

# Faktoren (Spezialtyp eines Vektors):

ğŸ‘‰[EinfÃ¼hrung in R, Kapitel 2.4.4](https://methodenlehre.github.io/einfuehrung-in-R/chapters/02-R-language.html#factors)

***Aufgabe: Arbeiten mit kategorialen Variablen (Faktoren)***

Kategoriale bzw. nominale Variablen werden in R als **Faktoren** gespeichert (`factor`-Datentyp).

-   **Erstelle** einen Character-Vektor mit mindestens fÃ¼nf EintrÃ¤gen, die verschiedene Geschlechtskategorien enthalten (z. B. *"male"*, *"female"*, *"nonbinary"*).

-   **Definiere** nun einen Faktor mit der Funktion `factor()` fÃ¼r diesen Vektor.

-   **Untersuche** die Eigenschaften deines Faktors mit den Funktionen `class()`, `attributes()` und `table()`.

**Beachte:** Die erste Stufe des Faktors ist die sogenannte **Referenzkategorie** â€“ sie ist fÃ¼r manche Analysen relevant. Mit `relevel()` kannst du die Referenzkategorie Ã¤ndern.

# Datenstrukturen: Vektoren, Listen, Matrizen und Data Frames

ğŸ‘‰[EinfÃ¼hrung in R, Kapitel 2.4](https://methodenlehre.github.io/einfuehrung-in-R/chapters/02-R-language.html#datentypen)

Bevor wir mit den Ãœbungen starten, ein Ãœberblick Ã¼ber die Unterschiede:

| Struktur | Eigenschaften | Beispiel-Inhalt |
|------------------------|------------------------|------------------------|
| **Vektor** | \- EnthÃ¤lt Elemente **eines** Datentyps<br>- Grundbaustein in R | `c(1, 2, 3)` oder `c("Anna", "Ben")` |
| **Liste** | \- Kann verschiedene Datentypen enthalten<br>- Elemente kÃ¶nnen unterschiedlich lang sein | Zahlenvektor, Textvektor, logischer Vektor in einer Liste |
| **Matrix** | \- EnthÃ¤lt nur **einen** Datentyp<br>- Hat feste Dimensionen (Zeilen, Spalten) | 3x3-Matrix mit Zahlen 1â€“9 |
| **Data Frame** | \- Tabellarisch aufgebaut<br>- Spalten kÃ¶nnen unterschiedliche Datentypen enthalten<br>- Jede Spalte gleich lang | Tabelle mit Name (Character), Alter (Numeric), Studiert (Logical) |

***ğŸ‘‰*** **Merksatz:**

\
**Vektor** = einfachste Struktur, ein Datentyp\
**Liste** = flexibel, verschiedene Datentypen\
**Matrix** = â€Zahlenrechteckâ€œ, ein Datentyp\
**Data Frame** = Tabelle, Spalten kÃ¶nnen unterschiedliche Datentypen haben

## Vektoren:

Wir haben in den Hands-On-Ãœbungen Block 1 und 2 bereits einige einfache Vektoren erstellt und damit operiert.

## Matrizen

Eine **Matrix** besteht nur aus einem Datentyp (z. B. nur Zahlen).

-   Erstelle eine 3x3-Matrix `matrix()` mit den Zahlen 1 bis 9.

-   Wandle einen Vektor 1:12 in eine 3x4-Matrix um. Teste den Unterschied zwischen `byrow = TRUE` und `byrow = FALSE` innerhalb von matrix().

-   Greife auf das Element in der 2. Zeile, 3. Spalte zu.

-   Berechne die Spaltensummen und Zeilensummen.

-   Schaue dir an, was passiert wenn du `t()` auf deine Matrix anwendest.

::: callout-note
## Freiwillig fÃ¼r Fortgeschrittene:

-   Generiere aus den Variablen ID, Initialen und Alter eine Matrize, die so aussieht: "1-RS-44" "2-MM-78" "3-PD-22" "4-PG-34" "5-DK-67" "1-RS-59Â«

-   Erstelle einen Vektor mit den Namen mehrerer berÃ¼hmter Wissenschaftler:innen. Kombiniere die Namen mit paste() und einem zusÃ¤tzlichen Suffix, z. B. â€, PhDâ€œ. PrÃ¼fe mit grepl(), ob einer der Namen ein bestimmtes Muster enthÃ¤lt (z. B. â€steinâ€œ).
:::

## Listen

Eine **Liste** kann verschiedene Datentypen enthalten (z. B. Zahlen, Zeichenketten, logische Werte).

ğŸ‘‰ [EinfÃ¼hrung in R, Kapitel 2.4.5](https://methodenlehre.github.io/einfuehrung-in-R/chapters/02-R-language.html#lists)

-   **Erstelle eine Liste mit drei Elementen und der Funktion** `list()`**:**

    -   einem Vektor mit den Zahlen 1 bis 5

    -   einem Character-Vektor mit den Namen deiner Kommiliton:innen

    -   einem logischen Vektor (TRUE, FALSE)

-   Greife auf das zweite Element der Liste zu.

-   Greife auf den dritten Wert des ersten Elements der Liste zu.

-   FÃ¼ge der Liste ein weiteres Element hinzu (z. B. den Mittelwert der Zahlen).

## Data Frames

ğŸ‘‰[EinfÃ¼hrung in R, Kapitel 2.4.6](https://methodenlehre.github.io/einfuehrung-in-R/chapters/02-R-language.html#data-frames)

Ein **Data Frame** ist eine tabellarische Struktur mit Spalten, die verschiedene Datentypen enthalten kÃ¶nnen.

-   Erstelle einen Data Frame `data.frame()` oder `tibble()` mit drei Spalten:

    -   name (Character)

    -   alter (Numeric)

    -   studiert (Logical: TRUE/FALSE)

-   Greife mit `datensatz$alter` auf die Spalte "alter" zu.

-   Filtere alle Zeilen, in denen studiert `== TRUE`.

-   FÃ¼ge eine neue Spalte hinzu, die "alter" + 10 berechnet.

-   Benenne die Spalten in deinem Data Frame mit `colnames()` oder `rename()`um, sodass sie internationalen Standards folgen.

-   Berechne den Mittelwert und die Standardabweichung der Variable â€age".

-   Sortiere den Data Frame basierend auf "age" absteigend mit `arrange()`.

Weitere Informationen zum Erstellen von Data Frames findest du hier: [EinfÃ¼hrung in R, Kapitel 3.1](https://methodenlehre.github.io/einfuehrung-in-R/chapters/03-data_frames.html#datens%C3%A4tze-selber-erstellen)

## Ãœbungen mit dat_full

Nun, da wir einige Operationen mit Data Frames kennengelernt haben, wenden wir diese auf unseren Datensatz dat_full an.

-   Lies dat_full ein. Diesen Datensatz solltest du als .csv-Datei abgespeichert haben.

-   Sieh dir den Datensatz genau an. Die Variable `csvtm_sum` scheint einen Tippfehler zu enthalten. Korrigiere diesen zu `cvstm_sum` mit einer der oben vorgestellten Funktionen.

-   Ãœberlege dir: Welche Variable sollte in einen Faktor umgewandelt werden?

-   Definiere diese Variable(n) als Faktor, z. B. mit `as.factor()` oder `factor().`

-   **Zum Schluss speichere den bereinigten Datensatz erneut mit `write.csv` ab.**

::: callout-note
**Hinweis:** R speichert nicht automatisch, dass eine Variable als Faktor definiert wurde. Dieser Code muss daher bei jedem Neustart erneut ausgefÃ¼hrt werden, wenn du wieder mit denselben Faktoren arbeiten mÃ¶chtest.
:::

# Am Ende deiner Ãœbungen - vergiss nicht dein Skript abzuspeichern! :-)
